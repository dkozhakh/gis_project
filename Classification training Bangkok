/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var l7Raw = ee.ImageCollection("LANDSAT/LE7_L1T"),
    BU_training = /* color: #ffc82d */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[100.51735997200012, 13.727258959421567],
                  [100.51735997200012, 13.72705572290108],
                  [100.51751554012299, 13.72705572290108],
                  [100.51752626895905, 13.72724332584933]]]),
            {
              "landcover": 1,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.51461338996887, 13.726795163001796],
                  [100.51461338996887, 13.726607559695099],
                  [100.51495134830475, 13.726602348490003],
                  [100.51491916179657, 13.726831641405122]]]),
            {
              "landcover": 1,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.5180037021637, 13.727227692276033],
                  [100.51801443099976, 13.72704008931528],
                  [100.51819682121277, 13.727066145291033],
                  [100.51818072795868, 13.727253748230948]]]),
            {
              "landcover": 1,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.5185079574585, 13.726524180399517],
                  [100.5185079574585, 13.72644080107429],
                  [100.51863133907318, 13.726461645908381],
                  [100.51863133907318, 13.726534602813095]]]),
            {
              "landcover": 1,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.51318645477295, 13.730620153257236],
                  [100.51318645477295, 13.730255374861297],
                  [100.51358342170715, 13.73030748609546],
                  [100.51349759101868, 13.730620153257236]]]),
            {
              "landcover": 1,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.51106214523315, 13.728890056400074],
                  [100.51108360290527, 13.728764988662709],
                  [100.51140546798706, 13.728806677915903],
                  [100.51137328147888, 13.728952590243752]]]),
            {
              "landcover": 1,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.44619292020798, 13.729684756089584],
                  [100.44619023799896, 13.729596166749362],
                  [100.44627070426941, 13.729596166749362],
                  [100.44627338647842, 13.729695178362709]]]),
            {
              "landcover": 1,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.4459810256958, 13.729687361657904],
                  [100.44601321220398, 13.729593561180025],
                  [100.44609904289246, 13.729596166749362],
                  [100.44606953859329, 13.729697783930913]]]),
            {
              "landcover": 1,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.4460883140564, 13.730323119463442],
                  [100.4460883140564, 13.730244952613068],
                  [100.44639945030212, 13.730161574610623],
                  [100.44641017913818, 13.730244952613068]]]),
            {
              "landcover": 1,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.58047771453857, 13.76389597620933],
                  [100.58082103729248, 13.762687165964904],
                  [100.58382511138916, 13.763416621170183],
                  [100.58258056640625, 13.764708793378373]]]),
            {
              "landcover": 1,
              "system:index": "9"
            })]),
    NBU_training = /* color: #07ff1a */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[100.51162004470825, 13.730015663035],
                  [100.51162004470825, 13.729432015824637],
                  [100.51237106323242, 13.729536238647304],
                  [100.5122423171997, 13.730078196578535]]]),
            {
              "landcover": 0,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.5159866809845, 13.730119885598286],
                  [100.5159866809845, 13.729932284951017],
                  [100.51622271537781, 13.729932284951017],
                  [100.51622271537781, 13.730109463344043]]]),
            {
              "landcover": 0,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.45748233795166, 13.731948984043585],
                  [100.45748770236969, 13.731777018130755],
                  [100.45773446559906, 13.731803073580203],
                  [100.45772910118103, 13.73192292861036]]]),
            {
              "landcover": 0,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.45396864414215, 13.731031831051068],
                  [100.45397400856018, 13.730651419950483],
                  [100.4542475938797, 13.730703531096633],
                  [100.45418858528137, 13.731026619944263]]]),
            {
              "landcover": 0,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.44546067714691, 13.730109463344043],
                  [100.44546604156494, 13.730041718680166],
                  [100.44566452503204, 13.730083407706395],
                  [100.44565379619598, 13.73018241911401]]]),
            {
              "landcover": 0,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.44494032859802, 13.729327792955637],
                  [100.44498860836029, 13.729197514304259],
                  [100.4452782869339, 13.729327792955637],
                  [100.4452246427536, 13.729379904395925]]]),
            {
              "landcover": 0,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.44656038284302, 13.729911440425392],
                  [100.44654965400696, 13.72982806230436],
                  [100.44680714607239, 13.729775950963662],
                  [100.44680714607239, 13.729869751368591]]]),
            {
              "landcover": 0,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.44510930776596, 13.72974989528898],
                  [100.44512540102005, 13.729676939384436],
                  [100.44524610042572, 13.729697783930913],
                  [100.44523000717163, 13.729783767665515]]]),
            {
              "landcover": 0,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.5986738204956, 13.773295304747897],
                  [100.59865236282349, 13.772732606134639],
                  [100.59974670410156, 13.772732606134639],
                  [100.59972524642944, 13.773149420052313]]]),
            {
              "landcover": 0,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.59461832046509, 13.77364959577239],
                  [100.59457540512085, 13.773128579374076],
                  [100.59532642364502, 13.773128579374076],
                  [100.59532642364502, 13.77358707386592],
                  [100.59476852416992, 13.77358707386592]]]),
            {
              "landcover": 0,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.48656821250916, 13.600368740076359],
                  [100.48672914505005, 13.598762823556466],
                  [100.48766255378723, 13.599159089683717],
                  [100.48739433288574, 13.60080671541916]]]),
            {
              "landcover": 0,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.48766255378723, 13.60080671541916],
                  [100.48770546913147, 13.600191464112084],
                  [100.48809170722961, 13.600358312082141],
                  [100.48804879188538, 13.600910995143314]]]),
            {
              "landcover": 0,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.4860907793045, 13.597923362860273],
                  [100.48604249954224, 13.59706304291087],
                  [100.48643410205841, 13.59706825698059],
                  [100.48640191555023, 13.5980120017078]]]),
            {
              "landcover": 0,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.48662722110748, 13.598262275921812],
                  [100.48662722110748, 13.597949433112989],
                  [100.48699200153351, 13.59800678765887],
                  [100.48699200153351, 13.598371770807278]]]),
            {
              "landcover": 0,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.48752844333649, 13.598293560179965],
                  [100.48757135868073, 13.597886864501637],
                  [100.48815608024597, 13.597897292604669],
                  [100.48810243606567, 13.598403055050964]]]),
            {
              "landcover": 0,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.48854231834412, 13.598439553330048],
                  [100.48860132694244, 13.598017215756618],
                  [100.4889714717865, 13.598022429805335],
                  [100.48895537853241, 13.598491693718993]]]),
            {
              "landcover": 0,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.48856914043427, 13.597652232061892],
                  [100.48867106437683, 13.59714125394448],
                  [100.48913240432739, 13.597188180552246],
                  [100.48899292945862, 13.597756513174918]]]),
            {
              "landcover": 0,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.48743724822998, 13.596885764472441],
                  [100.48746943473816, 13.596442567795927],
                  [100.48871397972107, 13.59643735371244],
                  [100.48873007297516, 13.59692747705812],
                  [100.48750162124634, 13.596890978546055]]]),
            {
              "landcover": 0,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.48812925815582, 13.596187077570338],
                  [100.48794686794281, 13.595957657541145],
                  [100.48829019069672, 13.595738665487836],
                  [100.48849403858185, 13.595988942103663]]]),
            {
              "landcover": 0,
              "system:index": "18"
            })]),
    BU_validation = /* color: #d63000 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[100.42071998119354, 13.68628500414437],
                  [100.42090237140656, 13.686008762704015],
                  [100.4210364818573, 13.686097368484372],
                  [100.42086482048035, 13.68637882191826]]]),
            {
              "landcover": 1,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.42232394218445, 13.686681123379627],
                  [100.4221361875534, 13.686556033166859],
                  [100.42224884033203, 13.68637882191826],
                  [100.42244732379913, 13.686509124319919]]]),
            {
              "landcover": 1,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.42014062404633, 13.686733244281989],
                  [100.42036056518555, 13.686363185625195],
                  [100.42091310024261, 13.686582093633339]]]),
            {
              "landcover": 1,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.41861981153488, 13.685745551218544],
                  [100.41883707046509, 13.685565733301749],
                  [100.41872441768646, 13.685797672328151]]]),
            {
              "landcover": 1,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.41881024837494, 13.686707183832253],
                  [100.41900873184204, 13.686331913035978],
                  [100.41920185089111, 13.686446579176128],
                  [100.41901409626007, 13.686816637701753]]]),
            {
              "landcover": 1,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.41884243488312, 13.687598449574415],
                  [100.41894435882568, 13.687379542511952],
                  [100.41942715644836, 13.687702690961126],
                  [100.41926085948944, 13.687843416759945]]]),
            {
              "landcover": 1,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.42194843292236, 13.688531408342314],
                  [100.42243123054504, 13.687890325340838],
                  [100.42252779006958, 13.688004990721431],
                  [100.42205572128296, 13.688609589076636]]]),
            {
              "landcover": 1,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.40700316429138, 13.681693099603159],
                  [100.4069709777832, 13.68117709110938],
                  [100.40710508823395, 13.681171878896606],
                  [100.40712118148804, 13.681687887401809]]]),
            {
              "landcover": 1,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.40697634220123, 13.681917224152109],
                  [100.40702998638153, 13.681745221610333],
                  [100.40736258029938, 13.682000619278623],
                  [100.40705680847168, 13.682047529024311]]]),
            {
              "landcover": 1,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.40771126747131, 13.681609704367679],
                  [100.40789902210236, 13.68118230332204],
                  [100.40825843811035, 13.681333457439072],
                  [100.40798485279083, 13.68178691920776]]]),
            {
              "landcover": 1,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.40755569934845, 13.682777234975438],
                  [100.40780782699585, 13.68265214268736],
                  [100.4085373878479, 13.683142087102564],
                  [100.40844082832336, 13.683564272429429]]]),
            {
              "landcover": 1,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.405313372612, 13.682381109168407],
                  [100.40541529655457, 13.682167409443027],
                  [100.40577471256256, 13.682308138552296],
                  [100.40570497512817, 13.682469716314722]]]),
            {
              "landcover": 1,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.3962367773056, 13.721166998538962],
                  [100.39624214172363, 13.720875164107358],
                  [100.39725601673126, 13.720989813391636],
                  [100.39722919464111, 13.72139629676632]]]),
            {
              "landcover": 1,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.39608657360077, 13.722146725761993],
                  [100.39610803127289, 13.721823624683056],
                  [100.3964513540268, 13.721844469927388],
                  [100.39644062519073, 13.722125880544521]]]),
            {
              "landcover": 1,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.39889752864838, 13.72180799074859],
                  [100.3989028930664, 13.721727215403977],
                  [100.39903968572617, 13.721737638030653],
                  [100.39903163909912, 13.72183925861648]]]),
            {
              "landcover": 1,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.3990289568901, 13.722112852282656],
                  [100.39903432130814, 13.721977358316408],
                  [100.3991362452507, 13.72201383746887],
                  [100.3991174697876, 13.722118063587496]]]),
            {
              "landcover": 1,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.4005229473114, 13.722120669239859],
                  [100.40053367614746, 13.722045105309316],
                  [100.40064096450806, 13.722073767492732],
                  [100.40062487125397, 13.722133697501288]]]),
            {
              "landcover": 1,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.40098428726196, 13.722647010425776],
                  [100.40100306272507, 13.722477643341326],
                  [100.40121495723724, 13.722516728063963],
                  [100.40118277072906, 13.722704334642053]]]),
            {
              "landcover": 1,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.40137857198715, 13.723301026788945],
                  [100.40139198303223, 13.723168139149593],
                  [100.40157705545425, 13.723181167352857],
                  [100.40156096220016, 13.723308843706567]]]),
            {
              "landcover": 1,
              "system:index": "18"
            })]),
    NBU_validation = /* color: #98ff00 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[100.40182113647461, 13.723155110945603],
                  [100.40184527635574, 13.722980532942357],
                  [100.40197134017944, 13.723014406296416],
                  [100.40191501379013, 13.723181167352857]]]),
            {
              "landcover": 0,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.40234953165054, 13.722990955513358],
                  [100.40234953165054, 13.722756447553795],
                  [100.4024863243103, 13.722761658844332],
                  [100.40247559547424, 13.723040462719304]]]),
            {
              "landcover": 0,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.40267676115036, 13.722954476512827],
                  [100.40269285440445, 13.722816377387979],
                  [100.40296643972397, 13.722832011255246],
                  [100.40296643972397, 13.722967504727947]]]),
            {
              "landcover": 0,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.40267676115036, 13.72336356212261],
                  [100.40267676115036, 13.72324891399818],
                  [100.40286988019943, 13.72324891399818],
                  [100.40286719799042, 13.723423491801727],
                  [100.40265530347824, 13.723368773399663]]]),
            {
              "landcover": 0,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.40213763713837, 13.723942013168744],
                  [100.40213763713837, 13.72363454837585],
                  [100.40243268013, 13.7237101117945],
                  [100.40240585803986, 13.723897717418332]]]),
            {
              "landcover": 0,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.402070581913, 13.724569969671862],
                  [100.40207594633102, 13.724392787094322],
                  [100.40234416723251, 13.724434477124614],
                  [100.40230125188828, 13.724598631546842]]]),
            {
              "landcover": 0,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.40264189243317, 13.724893066968775],
                  [100.40264189243317, 13.724794053328306],
                  [100.40296375751495, 13.72484356015377],
                  [100.4029369354248, 13.724942573773347]]]),
            {
              "landcover": 0,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.40416806936264, 13.72508588288556],
                  [100.40416806936264, 13.725031164871234],
                  [100.40437459945679, 13.725052009830573],
                  [100.4043585062027, 13.72511193907838]]]),
            {
              "landcover": 0,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.40437191724777, 13.725742498062033],
                  [100.40446311235428, 13.725557499527651],
                  [100.40459454059601, 13.725617428646315],
                  [100.40451139211655, 13.725771159793744]]]),
            {
              "landcover": 0,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.40489763021469, 13.726430378656554],
                  [100.40499418973923, 13.72622714141814],
                  [100.40503978729248, 13.726479885136683]]]),
            {
              "landcover": 0,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.40659010410309, 13.727399661524911],
                  [100.40661156177521, 13.727253748230948],
                  [100.40691465139389, 13.727337127267175],
                  [100.40688246488571, 13.727470012544929]]]),
            {
              "landcover": 0,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.4065552353859, 13.727722754924244],
                  [100.40654718875885, 13.727576841831267],
                  [100.4067188501358, 13.727623742478203],
                  [100.40669202804565, 13.727727966104457]]]),
            {
              "landcover": 0,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.40782123804092, 13.727939018805785],
                  [100.40782660245895, 13.727707121382908],
                  [100.40804386138916, 13.72774620523429],
                  [100.40800362825394, 13.728027608771978]]]),
            {
              "landcover": 0,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.40863126516342, 13.72806148139726],
                  [100.4086634516716, 13.727840006451038],
                  [100.4089879989624, 13.727931202042456],
                  [100.4089343547821, 13.728105776361412]]]),
            {
              "landcover": 0,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.43304204940796, 13.7279937361418],
                  [100.43305277824402, 13.727800922615291],
                  [100.43327808380127, 13.72780613379376],
                  [100.43327808380127, 13.728019792011603]]]),
            {
              "landcover": 0,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.431969165802, 13.727279804182949],
                  [100.43198525905609, 13.726664882943622],
                  [100.43268263339996, 13.726769106995954],
                  [100.43253779411316, 13.727394450337409]]]),
            {
              "landcover": 0,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.43122887611389, 13.726065593744012],
                  [100.43124496936798, 13.725883201075014],
                  [100.43156147003174, 13.725893623517065],
                  [100.43155074119568, 13.726117705909113]]]),
            {
              "landcover": 0,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.43354094028473, 13.725408979471924],
                  [100.43357312679291, 13.725028559251186],
                  [100.43381989002228, 13.72507546040762],
                  [100.43377161026001, 13.72545066932161]]]),
            {
              "landcover": 0,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.43545067310333, 13.726258408697051],
                  [100.43550431728363, 13.725914468399779],
                  [100.43588519096375, 13.72594573572037],
                  [100.43582081794739, 13.726289675971792]]]),
            {
              "landcover": 0,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.43545603752136, 13.726826430204998],
                  [100.4354989528656, 13.726461645908381],
                  [100.43612658977509, 13.726539814019693],
                  [100.43604075908661, 13.726831641405122]]]),
            {
              "landcover": 0,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.4394257068634, 13.729359059821192],
                  [100.43943107128143, 13.729134980525897],
                  [100.43964564800262, 13.729223570040324],
                  [100.43959200382233, 13.72945286039287]]]),
            {
              "landcover": 0,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.43573498725891, 13.729369482108794],
                  [100.43560892343521, 13.729502366235021],
                  [100.43555527925491, 13.729432015824637],
                  [100.43558210134506, 13.729351243105203]]]),
            {
              "landcover": 0,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.43526828289032, 13.72906202443006],
                  [100.43527096509933, 13.728963012549407],
                  [100.4354265332222, 13.728963012549407],
                  [100.43542921543121, 13.729192303156704]]]),
            {
              "landcover": 0,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.44286698102951, 13.730200658052961],
                  [100.4429018497467, 13.729981790691964],
                  [100.44321835041046, 13.730072985450533],
                  [100.44310569763184, 13.730299669411073]]]),
            {
              "landcover": 0,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.4452595114708, 13.733027676438063],
                  [100.4452595114708, 13.732816628316606],
                  [100.44540971517563, 13.732806206182229],
                  [100.44540971517563, 13.733139714252502]]]),
            {
              "landcover": 0,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.48607468605042, 13.608544146226954],
                  [100.48627853393555, 13.608064474581184],
                  [100.4870080947876, 13.608460725140995],
                  [100.48658967018127, 13.609013389287586]]]),
            {
              "landcover": 0,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.4870080947876, 13.609378355469302],
                  [100.48715829849243, 13.608961251215673],
                  [100.48766255378723, 13.609138520613286],
                  [100.48744797706604, 13.609503486602042]]]),
            {
              "landcover": 0,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.48765182495117, 13.6082730275901],
                  [100.48789858818054, 13.607709934044301],
                  [100.48928260803223, 13.608523290958216],
                  [100.4889178276062, 13.609013389287586]]]),
            {
              "landcover": 0,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.4830813407898, 13.60788720437912],
                  [100.48264145851135, 13.606938285157678],
                  [100.48363924026489, 13.606656736964572],
                  [100.48416495323181, 13.60717812224321]]]),
            {
              "landcover": 0,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.48738360404968, 13.605415835382336],
                  [100.48742651939392, 13.604936157397287],
                  [100.48954010009766, 13.605321985418257],
                  [100.48934698104858, 13.605874656893358]]]),
            {
              "landcover": 0,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.49211502075195, 13.60603107311431],
                  [100.49216866493225, 13.605551396375873],
                  [100.49389600753784, 13.605718240569047],
                  [100.49384236335754, 13.606364760706906],
                  [100.49198627471924, 13.606208344706442]]]),
            {
              "landcover": 0,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.49368143081665, 13.605353268743757],
                  [100.49374580383301, 13.604769312652925],
                  [100.49488306045532, 13.60484230724305],
                  [100.4949688911438, 13.60580166262154]]]),
            {
              "landcover": 0,
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.49251198768616, 13.604352200277608],
                  [100.49264073371887, 13.603476261897482],
                  [100.49433588981628, 13.603684818948588],
                  [100.49391746520996, 13.604362628095956]]]),
            {
              "landcover": 0,
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.48930406570435, 13.599033953083564],
                  [100.48945426940918, 13.598564690244233],
                  [100.49006581306458, 13.598564690244233],
                  [100.49002289772034, 13.599138233588276]]]),
            {
              "landcover": 0,
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.4909884929657, 13.601015274821526],
                  [100.49117088317871, 13.599190373823413],
                  [100.49164295196533, 13.599190373823413],
                  [100.49151420593262, 13.601015274821526]]]),
            {
              "landcover": 0,
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[100.49184679985046, 13.60159924017098],
                  [100.49179315567017, 13.599753487631471],
                  [100.49238324165344, 13.599555355147965],
                  [100.49269437789917, 13.601515816637788]]]),
            {
              "landcover": 0,
              "system:index": "35"
            })]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
//centering at Bangkok, Thailand
var roi_Bangkok = ee.Geometry.Point(100.515556, 13.726944);
var buffer_Bangkok = roi_Bangkok.buffer(15000);
Map.addLayer(buffer_Bangkok,{}, "Bangkok");

Map.setCenter(100.515556, 13.726944, 10);

//Filtering to 2000, 2005, 2010, 2015 summer
var L7Filtered2015 = l7Raw.filterDate('2015-06-01','2015-08-31').filterBounds(buffer_Bangkok);
var L7Filtered2010 = l7Raw.filterDate('2010-06-01','2010-08-31').filterBounds(buffer_Bangkok);
var L7Filtered2005 = l7Raw.filterDate('2005-06-01','2005-08-31').filterBounds(buffer_Bangkok);
var L7Filtered2000 = l7Raw.filterDate('2000-06-01','2000-08-31').filterBounds(buffer_Bangkok);

Map.addLayer(L7Filtered2000,{},'Bangkok 2000');
Map.addLayer(L7Filtered2005,{},'Bangkok 2005');
//Creating Simple Composite for cleaner image

var l7Composite15= ee.Algorithms.Landsat.simpleComposite({
  collection: L7Filtered2015,
  asFloat: true
});

var l7Composite10= ee.Algorithms.Landsat.simpleComposite({
  collection: L7Filtered2010,
  asFloat: true
});

var l7Composite05= ee.Algorithms.Landsat.simpleComposite({
  collection: L7Filtered2005,
  asFloat: true
});

var l7Composite00= ee.Algorithms.Landsat.simpleComposite({
  collection: L7Filtered2000,
  asFloat: true
});

//Now calculate NDVI, NDWI, NDBI to see what's happeing, train classificator

//NDVI
var ndvi15 = l7Composite15.normalizedDifference(['B4', 'B3']).rename('NDVI');
var ndvi10 = l7Composite10.normalizedDifference(['B4', 'B3']).rename('NDVI');
var ndvi05 = l7Composite05.normalizedDifference(['B4', 'B3']).rename('NDVI');
var ndvi00 = l7Composite00.normalizedDifference(['B4', 'B3']).rename('NDVI');

//NDBI
var ndbi15 = l7Composite15.normalizedDifference(['B5', 'B4']).rename('NDBI');
var ndbi10 = l7Composite10.normalizedDifference(['B5', 'B4']).rename('NDBI');
var ndbi05 = l7Composite05.normalizedDifference(['B5', 'B4']).rename('NDBI');
var ndbi00 = l7Composite00.normalizedDifference(['B5', 'B4']).rename('NDBI');

//NDWI

var ndwi15 = l7Composite15.normalizedDifference(['B2', 'B4']).rename('NDWI');
var ndwi10 = l7Composite10.normalizedDifference(['B2', 'B4']).rename('NDWI');
var ndwi05 = l7Composite05.normalizedDifference(['B2', 'B4']).rename('NDWI');
var ndwi00 = l7Composite00.normalizedDifference(['B2', 'B4']).rename('NDWI');

var landcover = BU_training.merge(NBU_training);

//SETTING BANDS
var bands = ['B1', 'B2', 'B3', 'B4', 'B5', 'B6_VCID_2', 'B7', 'NDVI','NDBI','NDWI'];

//Adding bands to composites
var input15 = l7Composite15.addBands(ndvi15).addBands(ndbi15).addBands(ndwi15);
var input10 = l7Composite10.addBands(ndvi10).addBands(ndbi10).addBands(ndwi10);
var input05 = l7Composite05.addBands(ndvi05).addBands(ndbi05).addBands(ndwi05);
var input00 = l7Composite00.addBands(ndvi00).addBands(ndbi00).addBands(ndwi00);

//Creating the training dataset

var training = input15.select(bands).sampleRegions({
collection: landcover,
properties: ['landcover'],
scale: 30
});

//Choosing classifier
var classifier = ee.Classifier.randomForest({numberOfTrees: 20})
.train({
features: training,
classProperty: 'landcover',
inputProperties: bands
});

//Getting trained classifier
var trained = classifier.train(training, 'landcover', bands);

//?????Do I put 'class' or 'landcover' in there???? Well, apparently landcover it is

//Classifying 2015,2010,2005,2000 with 2015 trained classifier

var classified2000 = input00.select(bands).classify(trained);
var classified2005 = input05.select(bands).classify(trained);
var classified2010 = input10.select(bands).classify(trained);
var classified2015 = input15.select(bands).classify(trained);

//Mapping results

Map.addLayer(classified2015.mask(classified2015), {'min':0, 'max':1 , 'palette':'ff133f'},'BU 2015');
Map.addLayer(classified2010.mask(classified2010), {'min':0, 'max':1 , 'palette':'b119ff'},'BU 2010');
Map.addLayer(classified2005.mask(classified2005), {'min':0, 'max':1 , 'palette':'blue'},'BU 2005');
Map.addLayer(classified2000.mask(classified2000), {'min':0, 'max':1 , 'palette':'1dfff4'},'BU 2000');
  
  
Map.addLayer(ndbi15,{'min':-0.5197, 'max':0.664},'NDBI 2015');
Map.addLayer(ndbi00,{'min':-0.5197, 'max':0.664},'NDBI 2000');

//Calculate a confusion matrix
var accuracyMatrix = trained.confusionMatrix();
print('Resubstitution error matrix: ', accuracyMatrix);

//Estimate the overall accuracy rate
var overallAccuracy = accuracyMatrix.accuracy();
print('Training overall accuracy: ', overallAccuracy);

//Why is my classifier 100% correct???!!!! NOw I dont see my classifier!!!


//How big is urban area??? And it's not working...
var urban_Bangkok2015masked = classified2015.mask(classified2015);
var urban_Bangkok2015 = urban_Bangkok2015masked.clip(buffer_Bangkok);

var urbanLandUseArea= urban_Bangkok2015.multiply(ee.Image.pixelArea());

var stats = urbanLandUseArea.reduceRegion(
{
'reducer': ee.Reducer.sum(),
'scale': 30,
'geometry': buffer_Bangkok,
'maxPixels': 1e9
});
print(stats);

print('urban area: ' + stats.getInfo() + ' square meters');

//Exporting to Assets
Export.image.toAsset({ 
  image: classified2015,
  region: buffer_Bangkok,
  description: 'built-up areas, Bangkok, 2015', assetId: 'BuiltUpAreasBangkok2015',
  scale: 30});
  
//Exporting to Google Drive
Export.image.toDrive(
  {image: classified2015,
    description: 'BU, Bangkok,2015',
    fileNamePrefix: 'bu_bangkok_2015',
    region: buffer_Bangkok,
    scale: 30, 
    maxPixels: 1e9
  });

