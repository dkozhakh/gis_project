/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var l7Raw = ee.ImageCollection("LANDSAT/LE7_L1T");
/***** End of imports. If edited, may not auto-convert in the playground. *****/
//centering at Bangkok, Thailand

var roi_Bangkok = ee.Geometry.Point(100.515556, 13.726944);
var buffer_Bangkok = roi_Bangkok.buffer(15000);
Map.addLayer(buffer_Bangkok,{}, "Bangkok");

Map.setCenter(100.515556, 13.726944, 10);


//Filtering to 2000, 2015 summer
var L7Filtered2015 = l7Raw.filterDate('2015-06-01','2015-08-31');
var L7Filtered2000 = l7Raw.filterDate('2000-06-01','2000-08-31');

//Creating Simple Composite for cleaner image

var l7Composite15= ee.Algorithms.Landsat.simpleComposite({
  collection: L7Filtered2015,
  asFloat: true
});

var l7Composite00= ee.Algorithms.Landsat.simpleComposite({
  collection: L7Filtered2000,
  asFloat: true
});


// //NDVI
// var ndvi15 = l7Composite15.normalizedDifference(['B4', 'B3']);
// var ndvi00 = l7Composite00.normalizedDifference(['B4', 'B3']);
// ndvi15.getInfo;// aha!!!It is an image!!!

// Map.addLayer(ndvi15,{'palette':'4B0082, 00FF00', 'min': 0.2, 'max': 0.9},'NDVI 2015');
// Map.addLayer(ndvi00,{'palette':'4B0082, 00FF00', 'min': 0.2, 'max': 0.9},'NDVI 2000');
// //Decrease in vegetation

// var difference = ndvi00.subtract(ndvi15);
// var decrease = difference.gt(0.1);

// Map.addLayer(decrease.mask(decrease), {'palette': 'FF0000'}, 'decrease in NDVI 2000-2015');


// //Increase in vegetation

// var increase = difference.lt(-0.5);
// Map.addLayer(increase.mask(increase), {'palette': '00FF00'}, 'increase in NDVI 2000-2015');

// //Export images
// Export.image.toDrive(
//   {image: increase,
//     description: 'increase_in_NDVI_Bangkok2000_2015',
//     fileNamePrefix: 'increase_in_NDVI_Bangkok2000_2015',
//     region: buffer_Bangkok,
//     scale: 30, 
//     maxPixels: 1e9
//   });
  
// Export.image.toDrive(
//   {image: decrease,
//     description: 'decrease_in_NDVI_Bangkok2000_2015',
//     fileNamePrefix: 'decrease_in_NDVI_Bangkok2000_2015',
//     region: buffer_Bangkok,
//     scale: 30, 
//     maxPixels: 1e9
//   });
  

//NDBI
var ndbi15 = l7Composite15.normalizedDifference(['B5', 'B4']);
var ndbi00 = l7Composite00.normalizedDifference(['B5', 'B4']);

Map.addLayer(ndbi15,{}, 'NDBI 2015');
Map.addLayer(ndbi00,{}, 'NDBI 2000');
//Increase in built-up areas

var difference_ndbi = ndbi00.subtract(ndbi15);
var increase_ndbi = increase_ndbi.gt(0.1);

Map.addLayer(increase_ndbi.mask(decrease_ndbi), {'palette': 'FF7F50'}, 'increase in NDBI 2000-2015');


//Increase in vegetation

var decrease_ndbi = difference_ndbi.lt(-0.5);
Map.addLayer(decrease_ndbi.mask(decrease_ndbi), {'palette': '6495ED'}, 'decrease in NDBI 2000-2015');
//NDWI
var ndwi15 = l7Composite15.normalizedDifference(['B2', 'B4']);
var ndwi00 = l7Composite00.normalizedDifference(['B2', 'B4']);

